{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e61b342c_2cad72fe",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 93,
      "author": {
        "id": 1018755
      },
      "writtenOn": "2021-12-05T21:29:53Z",
      "side": 1,
      "message": "(minor) Why not use `difflines` here as well?\n\nIt ends up being more code, and less robust code at that:\n\n $ output\u003d\" \"\n $ [ -z $output ] \u0026\u0026 echo empty || echo not empty\n empty\n $ printf -v output \u0027\\n\u0027\n $ [ -z $output ] \u0026\u0026 echo empty || echo not empty\n empty\n\n(you need to quote `output` with [ ], or use [[ ]])\n\nAlso, from a higher-level perspective, checking that a given (complex) filter matches nothing is less valuable than checking that it matches at least one thing. Unless the filter truly never matches anything.",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "869b8c36_c3df6940",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 93,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2021-12-06T09:15:54Z",
      "side": 1,
      "message": "Because the output is completely empty, and difflines can\u0027t check for that. If I do:\n```\n+ rbh_find \"rbh:mongo:$testdb\" -size +1k -size -1M | sort | difflines \"\"\n+ echo \"$?\"\n1\nrbh_find \"rbh:mongo:$testdb\" -size +1k -size -1M | sort | difflines\n+ echo \"$?\"\n1\n```",
      "parentUuid": "e61b342c_2cad72fe",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4257e36e_016a1843",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 93,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2021-12-06T10:00:39Z",
      "side": 1,
      "message": "After some tinkering, if we give the empty line or nothing to current difflines, it will still output the \u0027\\n\u0027 with nothing, and so we can\u0027t exactly check we got an empty line. The way to solve this if to add an if condition in the difflines function directly.",
      "parentUuid": "869b8c36_c3df6940",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63c4cc80_2aff01ec",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 130,
      "author": {
        "id": 1018755
      },
      "writtenOn": "2021-12-05T21:29:53Z",
      "side": 1,
      "message": "What is the difference between this test and test_plus_1k_minus_1M()?",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f184943_27a994a9",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 130,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2021-12-06T09:15:54Z",
      "side": 1,
      "message": "Test +1k -1M is supposed to match with nothing, as -1M ensures we only get empty files, and +1k ensures we get files bigger than 1k.\nMeanwhile, +1M -2G matches with anything bigger than 1M, and anything with size 1G or less, which can actually correspond to files.\n\nI just wanted to test that +1k -1M actually verify we don\u0027t match anything, and +1M -2G is a way to check two different filters that are not incompatible.",
      "parentUuid": "63c4cc80_2aff01ec",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b662e41_a2cd9078",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 130,
      "author": {
        "id": 1018755
      },
      "writtenOn": "2021-12-08T20:22:58Z",
      "side": 1,
      "message": "\u003e Test +1k -1M is supposed to match with nothing, as -1M ensures we only get empty files, and +1k ensures we get files bigger than 1k.\n\nI would rename the test then, and add a comment to explain why +1k / -1M won\u0027t ever match anything.",
      "parentUuid": "6f184943_27a994a9",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81bb1a59_84caa907",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 130,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2021-12-10T15:12:39Z",
      "side": 1,
      "message": "I can add a comment yes, but I don\u0027t see any better name, since all the other tests have similar names, it\u0027d be strange to just have this one with another name.",
      "parentUuid": "7b662e41_a2cd9078",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "408701ee_66856e49",
        "filename": "tests/test_size.bash",
        "patchSetId": 5
      },
      "lineNbr": 130,
      "author": {
        "id": 1018755
      },
      "writtenOn": "2021-12-12T13:09:25Z",
      "side": 1,
      "message": "OK for not changing the name.",
      "parentUuid": "81bb1a59_84caa907",
      "revId": "b995bb04feedd92363307028217da1919d2e6b37",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}